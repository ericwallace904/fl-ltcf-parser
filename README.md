# fl-ltcf-parser
 Python script to parse PDF reports from Florida DOH on COVID-19 cases in long term care facilities & generate a PDF

Since April, the Florida Department of Health has published PDF reports on COVID-19 cases tied to long-term care facilities. This report was published roughly every day. Until late August, it was fairly easy to parse this report into a CSV, using the Tabula tool.

In late August, however, the format of the PDF changed, and Tabula no longer handled it well.  Part of this seemed to be due to the fact that some rows of the report were split across pages. Recently I had a chance to revisit the problem, and created this Python script.

Required packages: pdfplumber & pandas

Usage: python fl-ltcf-parser foo.pdf foo.csv
* The argument with the name of the output CSV is optional.  If it is not specified, it will automatically use the same filename as the PDF, just with a CSV extension.
* The way I'm parsing arguments right now, the script only works if called after python on the command line.
* You will see a "page counter" on your command line as it progresses through the report.

Known issues:
For the PDF reports I have parsed with this, the total number of facilities in the CSV output has been off by 3, from the total given at the top of the PDF report.  The case totals have been off as well. After at least a day of troubleshooting, I printed out one of the PDFs, and added the cases page by page. That gave me the same total as the CSV file. This appears to indicate one of two issues with the PDF report:
  1) The way FDOH is generating the report, some facilities are being hidden from the PDF output.
  2) Some facilities are being double-counted when FDOH generates its totals.
Prior to the format changing, my CSVs generated by Tabula (with a little manual cleanup after) did match the totals at the top of the PDF report.
